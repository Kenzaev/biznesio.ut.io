<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интернет-магазин</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-database.js"></script>
    <style>
        /* Ваши стили */
    </style>
</head>
<body>
    <header>
        <h1>Добро пожаловать в интернет-магазин</h1>
        <input type="text" id="search-bar" placeholder="Поиск..." oninput="filterProducts()">
        <button class="admin-button" onclick="openPasswordModal()">Админ</button>
    </header>
    <main>
        <section class="gallery" id="product-gallery">
            <!-- Продукты будут добавлены здесь через JavaScript -->
        </section>
        <div class="cart">
            <!-- Корзина и другие элементы -->
        </div>
        <div class="admin-panel" id="admin-panel">
            <!-- Форма для добавления товаров -->
            <input type="text" id="product-name" placeholder="Название товара">
            <input type="number" id="product-price" placeholder="Цена товара">
            <input type="text" id="product-video" placeholder="Ссылка на видео">
            <input type="file" id="product-image" accept="image/*">
            <button onclick="addProduct()">Добавить товар</button>
        </div>
    </main>

    <!-- Модальное окно для администрирования -->
    <div id="passwordModal" style="display:none;">
        <!-- Форма ввода пароля -->
    </div>

    <script>
    // Ваши настройки Firebase
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT_ID.appspot.com",
        messagingSenderId: "YOUR_SENDER_ID",
        appId: "YOUR_APP_ID"
    };

    // Инициализация Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    let isAdmin = false;

    // Функция для отображения продуктов
    function displayProducts() {
        const productsDiv = document.getElementById("product-gallery");
        productsDiv.innerHTML = ''; // очистка предыдущего содержимого
        database.ref('products').once('value').then(snapshot => {
            snapshot.forEach(childSnapshot => {
                const product = childSnapshot.val();
                const productDiv = document.createElement("div");
                productDiv.className = "product-card";
                productDiv.innerHTML = `
                    <h2>${product.name}</h2>
                    <img src="${product.image}" alt="${product.name}">
                    <p>Цена: ${product.price}₽</p>
                    <button onclick="orderNow('${product.name}')">Заказать</button>
                    <button onclick="viewVideo('${product.video}')">Обзор</button>
                    ${isAdmin ? `<button onclick="deleteProduct('${childSnapshot.key}')">Удалить</button>` : ''}
                `;
                productsDiv.appendChild(productDiv);
            });
        });
    }

    // Функция для добавления товара
    function addProduct() {
        const name = document.getElementById("product-name").value;
        const price = parseFloat(document.getElementById("product-price").value);
        const video = document.getElementById("product-video").value;
        const imageFile = document.getElementById("product-image").files[0];

        if (name && price && video && imageFile) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const image = event.target.result;
                const productRef = database.ref('products').push();
                productRef.set({
                    name,
                    price,
                    video,
                    image
                });
                displayProducts(); // обновление списка продуктов
                alert('Товар добавлен!');
            };
            reader.readAsDataURL(imageFile);
        } else {
            alert('Заполните все поля!');
        }
    }

    // Функция удаления товара
    function deleteProduct(productId) {
        database.ref('products/' + productId).remove();
        displayProducts(); // обновление списка продуктов
    }

    // Инициализация отображения продуктов при загрузке страницы
    displayProducts();
    </script>
</body>
</html>
